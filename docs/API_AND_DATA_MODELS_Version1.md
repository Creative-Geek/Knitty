# API Reference and Data Models

This document defines the data structures, function signatures, and LLM prompts used throughout the application.

## 1. Data Models

### Keyword Extraction Output

-   **Description**: The output from the **Fast LLM** after processing a CV or job description.
-   **Format**: JSON
-   **Structure**: A JSON array of strings.
-   **Example**:
    ```json
    [
      "Python",
      "Machine Learning",
      "Project Management",
      "SQL",
      "Team Leadership",
      "Agile",
      "Data Analysis",
      "AWS",
      "Problem Solving",
      "Communication"
    ]
    ```

### Job Description Extraction Output

-   **Description**: The structured output from the **Context LLM** via the `RAGJobExtractor` script.
-   **Format**: JSON
-   **Structure**:
    ```json
    {
      "job_title": "string",
      "role_summary": "string",
      "key_responsibilities": ["string"],
      "required_qualifications": ["string"],
      "preferred_qualifications": ["string"]
    }
    ```

### Final CV Output

-   **Description**: The final tailored CV generated by the **Smart LLM**.
-   **Format**: Markdown
-   **Structure**: Follows the provided CV template.

## 2. LLM Prompts

### Prompt 1: Keyword Extraction (Fast LLM)

-   **Purpose**: To extract professionally relevant keywords from a given text (CV or job description).
-   **Prompt Text**:
    ```markdown
    You are an expert keyword extraction system specializing in resume and CV analysis. Your task is to extract relevant professional keywords from the provided CV text.

    **Instructions:**
    1. Extract keywords that are professionally relevant and valuable for job matching, skill assessment, or career analysis
    2. Focus on the following categories:
       - Technical skills (programming languages, software, tools, frameworks)
       - Professional skills (project management, leadership, analysis, etc.)
       - Industry terms and domain expertise
       - Job titles and roles
       - Certifications and qualifications
       - Relevant technologies and methodologies
       - Important action verbs that demonstrate capabilities

    **Guidelines:**
    - Extract single words or short phrases (2-3 words maximum)
    - Include both explicit skills mentioned and implied competencies
    - Normalize variations (e.g., "JavaScript" and "JS" should be "JavaScript")
    - Include both technical and soft skills
    - Avoid generic words like "the", "and", "experience" unless part of a specific term
    - Include industry-standard abbreviations and acronyms
    - Capture different forms of the same skill (e.g., "manage", "management", "manager")

    **Output Format:**
    Return your response as a JSON array of strings, where each string is a single keyword or short phrase.

    **Example Output:**
    ["Python", "Machine Learning", "Project Management", "SQL", "Team Leadership", "Agile", "Data Analysis", "AWS", "Problem Solving", "Communication"]

    **CV Text to Analyze:**
    [INSERT CV OR JOB TEXT HERE]

    Extract all relevant keywords and return them as a JSON array.
    ```

### Prompt 2: CV Revision (Smart LLM)

-   **Purpose**: To rewrite and tailor the CV to match the job description.
-   **Input Variables**: `{current_cosine_similarity}`, `{job_description}`, `{cv_text}`, `{job_keywords}`, `{cv_keywords}`.
-   **Prompt Text**:
    ```markdown
    You are an expert resume editor and talent acquisition specialist. Your task is to revise the following resume so that it aligns as closely as possible with the provided job description and extracted job keywords, in order to maximize the cosine similarity between the resume and the job keywords.

    **Instructions:**
    - Carefully review the job description and the list of extracted job keywords.
    - Update the candidate's resume by:
      - Emphasizing and naturally incorporating relevant skills, experiences, and keywords from the job description and keyword list.
      - Where appropriate, naturally weave the extracted job keywords into the resume content.
      - Rewriting, adding, or removing resume content as needed to better match the job requirements.
      - Maintaining a natural, professional tone and avoiding keyword stuffing.
      - Where possible, use quantifiable achievements and action verbs.
      - The current cosine similarity score is {current_cosine_similarity:.4f}. Revise the resume to further increase this score.
    - ONLY output the improved updated resume. Do not include any explanations, commentary, or formatting outside of the resume itself.

    **Job Description:**
    {job_description}

    **Raw CV Text:**
    {cv_text}

    **Job Keywords:**
    {job_keywords}

    **CV Keywords:**
    {cv_keywords}

    **Output the revised CV using the following template:**
    [INSERT CV TEMPLATE MARKDOWN HERE]
    ```